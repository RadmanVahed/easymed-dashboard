import{u as U,o as V,s as i,a as y,_ as $,b as S,c as B,d as C,e as F}from"./BxtvYY3Z.js";import{f as j,g as v,h as z,r as T,i as q,w as o,n as A,o as D,a as u,b as s,j as a,k as L}from"./DuWiOptl.js";const N={dir:"rtl",class:"flex justify-center items-center min-h-screen"},G=j({__name:"index",setup(R){const d=U(),m=v(),_=z(),p=V({username:i().min(3,"نام کاربری باید حداقل ۳ کاراکتر باشد."),password:i().min(6,"کلمه عبور باید حداقل ۶ کاراکتر باشد.")}),t=T({username:"",password:""}),{execute:f,status:h,data:I,error:O}=y("/auth/login",{method:"POST",body:t,immediate:!1,watch:!1,onResponse({response:n}){var e;if((e=n._data)!=null&&e.success&&n._data.token){const l=n._data;d.setLoginData(l.token,"admin"),m.add({title:"ورود موفق",description:l.message||"شما با موفقیت وارد شدید.",color:"success",icon:"i-heroicons-check-circle"}),A(()=>{_.push("/dashboard")})}}});async function w(n){await f()}return(n,e)=>{const l=F,r=C,g=L,b=B,x=S,k=$;return D(),q(k,null,{default:o(()=>[u("div",N,[s(x,{class:"w-full max-w-sm"},{header:o(()=>[...e[2]||(e[2]=[u("h1",{class:"text-xl font-bold text-center"},"ورود به پنل ایزی مد",-1)])]),default:o(()=>[s(b,{schema:a(p),state:a(t),class:"space-y-4",onSubmit:w},{default:o(()=>[s(r,{class:"w-full",label:"نام کاربری",name:"username",required:""},{default:o(()=>[s(l,{class:"w-full",modelValue:a(t).username,"onUpdate:modelValue":e[0]||(e[0]=c=>a(t).username=c),placeholder:"نام کاربری خود را وارد کنید",icon:"i-heroicons-user",size:"lg",autocomplete:"username"},null,8,["modelValue"])]),_:1}),s(r,{class:"w-full",label:"کلمه عبور",name:"password",required:""},{default:o(()=>[s(l,{class:"w-full",modelValue:a(t).password,"onUpdate:modelValue":e[1]||(e[1]=c=>a(t).password=c),type:"password",placeholder:"کلمه عبور خود را وارد کنید",icon:"i-heroicons-lock-closed",size:"lg",autocomplete:"current-password"},null,8,["modelValue"])]),_:1}),s(g,{type:"submit",loading:a(h)==="pending",block:"",label:"ورود",size:"lg"},null,8,["loading"])]),_:1},8,["schema","state"])]),_:1})])]),_:1})}}});export{G as default};
